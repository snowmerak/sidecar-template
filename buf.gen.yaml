version: v1
managed:
  enabled: true
  # go_package_prefix:
  #   default: github.com/my-org/core-platform/gen/go
  #   except:
  #     - buf.build/googleapis/googleapis

plugins:
  # 1. Go (Sidecar용)
  - plugin: buf.build/protocolbuffers/go
    out: gen/go
    opt: paths=source_relative
  - plugin: buf.build/grpc/go
    out: gen/go
    opt: paths=source_relative

  # 2. TypeScript (NestJS/Bun용)
  - plugin: buf.build/stephenh/ts-proto
    out: gen/ts
    opt:
      - nestJs=true
      - outputServices=grpc-js
      - esModuleInterop=true

  # 3. PHP (Laravel용)
  - plugin: buf.build/grpc/php
    out: gen/php

  # 4. Rust (Sidecar용)
  - plugin: buf.build/community/neoeinstein-prost
    out: gen/rust
  - plugin: buf.build/community/neoeinstein-tonic
    out: gen/rust

  # C++
  - plugin: buf.build/protocolbuffers/cpp
    out: gen/cpp
  - plugin: buf.build/grpc/cpp
    out: gen/cpp